# 기술 스택

## 1. 프론트엔드

### 핵심 기술
| 기술 | 버전 | 용도 |
|------|------|------|
| **Next.js** | 14.x | React 프레임워크, App Router 사용 |
| **React** | 18.x | UI 라이브러리 |
| **TypeScript** | 5.x | 타입 안정성 |
| **Tailwind CSS** | 3.x | 스타일링 |

### 상태 관리 & 데이터
| 기술 | 용도 |
|------|------|
| **Zustand** | 클라이언트 상태 관리 (경량) |
| **@supabase/supabase-js** | Supabase 클라이언트 |
| **React Query (TanStack Query)** | 서버 상태 관리, 캐싱 |

### UI 컴포넌트 & 애니메이션
| 기술 | 용도 |
|------|------|
| **Framer Motion** | 뽑기 애니메이션 효과 |
| **canvas-confetti** | 당첨 축하 효과 |
| **Lucide React** | 아이콘 |
| **shadcn/ui** | UI 컴포넌트 (선택) |

## 2. 백엔드

### Supabase (BaaS)
| 기능 | 용도 |
|------|------|
| **PostgreSQL** | 메인 데이터베이스 |
| **Realtime** | 실시간 데이터 동기화 |
| **Row Level Security** | 데이터 접근 제어 |
| **Edge Functions** | 서버리스 함수 (필요시) |
| **Storage** | 경품 이미지 저장 (선택) |

### 왜 Supabase인가?
1. **실시간 기능 내장**: WebSocket 기반 Realtime 구독
2. **빠른 개발**: 별도 백엔드 서버 불필요
3. **PostgreSQL**: 강력한 트랜잭션 및 동시성 제어
4. **무료 티어**: 소규모 이벤트에 충분

## 3. 인프라 & 배포

| 서비스 | 용도 |
|--------|------|
| **Vercel** | Next.js 호스팅 및 배포 |
| **Supabase Cloud** | 데이터베이스 호스팅 |

### 배포 구성
```
┌─────────────────┐     ┌──────────────────┐
│     Vercel      │────▶│  Supabase Cloud  │
│   (Next.js)     │◀────│   (PostgreSQL)   │
│                 │     │   (Realtime)     │
└────────┬────────┘     └──────────────────┘
         │
         │ QR Code
         ▼
┌─────────────────┐
│  사용자 모바일   │
└─────────────────┘
```

## 4. 개발 도구

| 도구 | 용도 |
|------|------|
| **pnpm** | 패키지 매니저 |
| **ESLint** | 코드 린팅 |
| **Prettier** | 코드 포맷팅 |
| **Supabase CLI** | 로컬 개발 및 마이그레이션 |

## 5. 패키지 설치 명령어

```bash
# Next.js 프로젝트 생성
npx create-next-app@latest lucky-draw --typescript --tailwind --app --src-dir

# 핵심 패키지
pnpm add @supabase/supabase-js @supabase/ssr
pnpm add zustand @tanstack/react-query

# UI & 애니메이션
pnpm add framer-motion canvas-confetti lucide-react
pnpm add @types/canvas-confetti -D

# 유틸리티
pnpm add clsx tailwind-merge
pnpm add nanoid  # 세션 ID 생성용

# QR 코드 생성 (관리자용)
pnpm add qrcode @types/qrcode -D
```

## 6. 환경 변수

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# 관리자 기능용 (서버 사이드에서만 사용)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# 게임 설정
NEXT_PUBLIC_GAME_ID=your-game-uuid
```

## 7. 폴더 구조

```
src/
├── app/
│   ├── page.tsx              # 메인 (이름 입력)
│   ├── game/
│   │   └── page.tsx          # 뽑기판 화면
│   ├── result/
│   │   └── page.tsx          # 결과 화면 (선택)
│   ├── admin/
│   │   ├── page.tsx          # 관리자 대시보드
│   │   ├── prizes/
│   │   │   └── page.tsx      # 경품 설정
│   │   └── monitor/
│   │       └── page.tsx      # 실시간 모니터링
│   └── layout.tsx
├── components/
│   ├── ui/                   # 공통 UI 컴포넌트
│   ├── DrawBoard.tsx         # 뽑기판 컴포넌트
│   ├── SlotCard.tsx          # 개별 칸 컴포넌트
│   ├── ResultModal.tsx       # 결과 모달
│   ├── NameInput.tsx         # 이름 입력 폼
│   └── Confetti.tsx          # 축하 효과
├── lib/
│   ├── supabase/
│   │   ├── client.ts         # 클라이언트 설정
│   │   ├── server.ts         # 서버 설정
│   │   └── types.ts          # DB 타입 정의
│   └── utils.ts
├── hooks/
│   ├── useGame.ts            # 게임 상태 훅
│   ├── usePrizes.ts          # 경품 데이터 훅
│   └── useRealtime.ts        # 실시간 구독 훅
├── store/
│   └── gameStore.ts          # Zustand 스토어
└── types/
    └── index.ts              # 공통 타입
```

## 8. 브라우저 지원

- Chrome 80+
- Safari 14+
- Firefox 80+
- Edge 80+
- Samsung Internet 14+

모바일 최적화 필수 (대부분 스마트폰으로 접속)
